{% extends 'yuzzaz/base.html' %} {% load static %} {% load widget_tweaks %} 
{% block title %}Register{% endblock %} {% block content %}
<!-- Header -->
<div class="text-center mb-8">
  <div
    class="inline-flex items-center justify-center w-16 h-16 bg-brown-900 rounded-full mb-4 border border-gray-600"
  >
    <i class="fas fa-user-plus text-white text-2xl"></i>
  </div>
  <h1 class="text-3xl font-black text-white tracking-tight">Jiunge Nasi!</h1>
  <p class="text-gray-300 mt-2 text-lg">Tengeneza akaunti yako</p>
</div>

<!-- Register Form -->
<form method="POST" action="{% url 'register' %}" class="space-y-6">
  {% csrf_token %}

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

    <!-- First Name -->
    <div class="space-y-2">
      <label for="id_first_name" class="block text-gray-300 font-medium">
        <i class="fas fa-user mr-2 text-gray-400"></i>
        Jina la kwanza la mtumiaji
      </label>
      {{ form.first_name|add_class:"w-full bg-brown-900 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent placeholder-gray-400" }}
      {% if form.first_name.errors %}
      <p class="text-red-400 text-sm mt-1">{{ form.first_name.errors.0 }}</p>
      {% endif %}
    </div>

    <!-- Last Name -->
    <div class="space-y-2">
      <label for="id_last_name" class="block text-gray-300 font-medium">
        <i class="fas fa-user mr-2 text-gray-400"></i>
        Jina la mwisho la mtumiaji
      </label>
      {{ form.last_name|add_class:"w-full bg-brown-900 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent placeholder-gray-400" }}
      {% if form.last_name.errors %}
      <p class="text-red-400 text-sm mt-1">{{ form.last_name.errors.0 }}</p>
      {% endif %}
    </div>

    <!-- Telephone -->
    <div class="space-y-2">
      <label for="id_telephone" class="block text-gray-300 font-medium">
        <i class="fas fa-phone mr-2 text-gray-400"></i>
        Nambari ya simu
      </label>
      {{ form.telephone|add_class:"w-full bg-brown-900 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent placeholder-gray-400" }}
      {% if form.telephone.errors %}
      <p class="text-red-400 text-sm mt-1">{{ form.telephone.errors.0 }}</p>
      {% endif %}
    </div>

    <!-- Email -->
    <div class="space-y-2">
      <label for="id_email" class="block text-gray-300 font-medium">
        <i class="fas fa-envelope mr-2 text-gray-400"></i>
        Barua pepe (Si lazima)
      </label>
      {{ form.email|add_class:"w-full bg-brown-900 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent placeholder-gray-400" }}
      {% if form.email.errors %}
      <p class="text-red-400 text-sm mt-1">{{ form.email.errors.0 }}</p>
      {% endif %}
    </div>

    <!-- Password -->
    <div class="space-y-2">
      <label for="id_password1" class="block text-gray-300 font-medium">
        <i class="fas fa-key mr-2 text-gray-400"></i>
        Nywila
      </label>
      {{ form.password1|add_class:"w-full bg-brown-900 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent placeholder-gray-400" }}
      {% if form.password1.errors %}
      <p class="text-red-400 text-sm mt-1">{{ form.password1.errors.0 }}</p>
      {% endif %}
    </div>

    <!-- Confirm Password -->
    <div class="space-y-2">
      <label for="id_password2" class="block text-gray-300 font-medium">
        <i class="fas fa-lock mr-2 text-gray-400"></i>
        Thibitisha nywila
      </label>
      {{ form.password2|add_class:"w-full bg-brown-900 border border-gray-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent placeholder-gray-400" }}
      {% if form.password2.errors %}
      <p class="text-red-400 text-sm mt-1">{{ form.password2.errors.0 }}</p>
      {% endif %}
    </div>

  </div>

  <!-- Submit Button -->
  <button
    type="submit"
    class="w-full bg-white text-brown-900 hover:bg-gray-200 py-3 rounded-lg font-bold transition-colors flex items-center justify-center space-x-2"
  >
    <i class="fas fa-user-plus"></i>
    <span>Tengeneza Akaunti</span>
  </button>
</form>


<!-- Additional Links -->
<div class="mt-6 text-center">
  <p class="text-gray-300 text-sm">
    Tayari una akaunti?
    <a
      href="{% url 'login' %}"
      class="text-white hover:text-gray-300 font-medium underline"
    >
      Ingia hapa
    </a>
  </p>
</div>
 {% block scripts %}
<script>
    const tel = document.getElementById("id_telephone");

    tel.addEventListener("input", () => {
        let v = tel.value.replace(/\s+/g, "");

        // Always enforce prefix
        if (!v.startsWith("+255")) {
            v = v.replace(/^\+?0*/, ""); 
            v = "+255" + v;
        }

        // If the user types "+2550", remove the zero
        if (v.startsWith("+2550")) {
            v = "+255" + v.slice(5);
        }

        tel.value = v;
    });
</script>
{% endblock %}
{% endblock %}
